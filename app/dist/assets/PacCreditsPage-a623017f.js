import{x as g,r as o,j as s}from"./index-d910b063.js";import{T as S}from"./Toolbar-79d34470.js";import{S as j,a as v}from"./StatsCard-94764ff7.js";import{A}from"./constants-53c7a41b.js";import{l as I,d as b}from"./utils-ae6c9da2.js";import{C as L}from"./Container-07cda008.js";import{P as T}from"./Paper-37965af9.js";import{G as c}from"./Grid-1fa796df.js";import{P as w}from"./Page-3b479898.js";import"./ArrowBack-1462d81c.js";import"./createSvgIcon-08e146b5.js";import"./Toolbar-bb7e79c6.js";import"./Backdrop-6925e10d.js";import"./FormControl-070dad34.js";import"./Select-4dcb9f12.js";import"./Menu-f153eb6a.js";import"./MenuItem-3d2809ad.js";import"./dividerClasses-c9f1e17e.js";import"./ArrowForward-877a8700.js";import"./CardContent-441a39f3.js";import"./CardHeader-1c812e31.js";import"./Divider-b4213ec4.js";function D(){const[i,l]=g(),[p,u]=o.useState(!1),[e,C]=o.useState(void 0),[f,h]=o.useState([]),[a,P]=o.useState(void 0),d=r=>{C(r),i.set("customerId",r.id),l(i)};o.useEffect(()=>{e!==void 0&&x(e.id)},[e]);const x=r=>{u(!0);const n=new URL(`${A}/pac/customers/${r}/stats`);fetch(n).then(async t=>await t.json()).then(t=>{const m=[{name:"General",value:(t==null?void 0:t.generalCount)??0,status:void 0},{name:"Anulados",value:(t==null?void 0:t.statusAnulCount)??0,status:"ANUL"},{name:"Cancelados",value:(t==null?void 0:t.statusCancCount)??0,status:"CANC"},{name:"Mora",value:(t==null?void 0:t.statusMoraCount)??0,status:"MORA"},{name:"Pendientes",value:(t==null?void 0:t.statusPendCount)??0,status:"PEND"}];h(m),P(t==null?void 0:t.createdAt)}).finally(()=>u(!1))};return s.jsx(L,{sx:{mt:4,mb:4},children:s.jsxs(T,{variant:"outlined",sx:{width:"100%",mb:2,pt:1},children:[s.jsx(S,{title:"Créditos PAC",children:s.jsx(j,{onChange:d,defaultCustomerId:i.get("customerId"),hasProducts:["lms"]})}),s.jsx(c,{container:!0,spacing:3,marginTop:1,padding:3,children:f.map(({name:r,value:n,status:t},m)=>s.jsx(c,{item:!0,xs:12,md:3,children:s.jsx(v,{title:r,subtitle:a&&"Total al "+I({date:a,withTime:!1}),value:n,isLoading:p,href:`/tool/pac/credits/report?${b({customerId:e==null?void 0:e.id,status:t})}`,goToLabel:"Ver"})},m))})]})})}function Y(){return s.jsx(w,{title:"Créditos PAC",children:s.jsx(D,{})})}export{Y as default};
