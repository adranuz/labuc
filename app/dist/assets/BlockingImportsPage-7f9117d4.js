import{j as e,f as F,i as _,r as c}from"./index-b42bb106.js";import{d as q}from"./Upload-71eb046d.js";import{r as M,i as $}from"./createSvgIcon-d23abb9c.js";import{d as A}from"./Close-b281c7ab.js";import{a as L}from"./api-8c80c0c6.js";import{B as f}from"./Box-244d35cf.js";import{P as E,T as N}from"./Typography-97eb5159.js";import{T as U}from"./Toolbar-d2130989.js";import{B as z,P as G}from"./Page-d4992afd.js";import{L as O,T as H,a as W,b as J,c as j,d as s,e as K}from"./TableRow-1b9ea06e.js";import{T as P}from"./Tooltip-523a799b.js";import{T as Q}from"./TablePagination-8f236e51.js";import{C as V}from"./Container-39c7183f.js";import"./styled-82e1a40e.js";import"./Menu-8b8cdc95.js";import"./Backdrop-8d503ce4.js";import"./KeyboardArrowRight-92e666a9.js";import"./Select-b0379f96.js";import"./MenuItem-d7a9b7ba.js";import"./dividerClasses-994ab282.js";var d={},X=$;Object.defineProperty(d,"__esModule",{value:!0});var b=d.default=void 0,Y=X(M()),Z=e,ee=(0,Y.default)((0,Z.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");b=d.default=ee;function te(){var x;const T=F(),[n,h]=_(),[S,m]=c.useState(!1),[o,I]=c.useState({}),[l,u]=c.useState({perPage:parseInt(n.get("perPage")||"10"),page:parseInt(n.get("page")||"0"),q:n.get("q")||""});c.useEffect(()=>{g(l)},[]);const g=({perPage:t,page:r,q:a})=>{m(!0);const i=new URL(`${L}/blocking/imports`),k={perPage:String(t),page:String(r),q:a};i.search=new URLSearchParams(k).toString(),fetch(i).then(async p=>await p.json()).then(p=>{I(p)}).finally(()=>m(!1))},v=(t,r)=>{const a={...l,page:r};u(a),g(a),h({perPage:String(a.perPage),page:String(a.page),q:a.q})},w=t=>{const r=parseInt(t.target.value),a={...l,perPage:r,page:0};u(a),g(a),h({perPage:String(a.perPage),page:String(a.page),q:a.q})},B=()=>{T("/tool/blocking/imports/new")},R=(t,r)=>{const a=new Date(t);return(new Date(r).getTime()-a.getTime())/1e3},y=t=>{const r=Math.floor(t/3600),a=Math.floor(t%3600/60),i=(t%60).toFixed(2);return`${r>0?r+" hr ":""}${a>0?a+" min ":""}${i} seg`},C=t=>{const r=t==0?0:Math.floor(Math.log(t)/Math.log(1024));return Number((t/Math.pow(1e3,r)).toFixed(2))*1+" "+["B","kB","MB","GB","TB"][r]},D=t=>new Date(t).toLocaleString("es",{dateStyle:"medium",timeStyle:"short",hour12:!0});return e.jsx(f,{sx:{width:"100%",position:"relative"},children:e.jsxs(E,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsxs(U,{children:[e.jsx(N,{component:"h2",variant:"h5",noWrap:!0,color:"primary",sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:"Importaciones"}),e.jsx(f,{sx:{display:"flex",alignItems:"center",gap:2},children:e.jsx(z,{size:"small",color:"primary",startIcon:e.jsx(q,{}),onClick:()=>B(),children:"Importar archivos"})})]}),S&&e.jsx(O,{sx:{position:"absolute",top:"0",left:0,right:0,borderTopLeftRadius:4,borderTopRightRadius:4}}),e.jsx(H,{children:e.jsxs(W,{size:"small",children:[e.jsx(J,{children:e.jsxs(j,{children:[e.jsx(s,{children:"Fecha de importación"}),e.jsx(s,{align:"right",children:"Total de archivos"}),e.jsx(s,{align:"right",children:"Tamaño total de los archivos"}),e.jsx(s,{align:"center",children:"Restablecer tablas"}),e.jsx(s,{align:"right",children:"Duración de la importación"})]})}),e.jsx(K,{children:(x=o==null?void 0:o.data)==null?void 0:x.map(t=>e.jsxs(j,{selected:t.id===n.get("selected"),children:[e.jsx(s,{children:D(t.createdAt)}),e.jsx(s,{align:"right",children:t.totalFiles}),e.jsx(s,{align:"right",children:C(t.totalFilesSize)}),e.jsx(s,{align:"center",children:t.truncate?e.jsx(P,{title:"Si",arrow:!0,children:e.jsx(b,{color:"success"})}):e.jsx(P,{title:"No",arrow:!0,children:e.jsx(A,{color:"error"})})}),e.jsx(s,{align:"right",children:y(R(t.startedAt,t.finishedAt))})]},t.id))})]})}),e.jsx(Q,{rowsPerPageOptions:[5,10,25,100],component:"div",count:(o==null?void 0:o.total)||0,rowsPerPage:l.perPage,page:(o==null?void 0:o.page)||0,onPageChange:v,onRowsPerPageChange:w,labelRowsPerPage:"Filas por página:",labelDisplayedRows:({from:t,to:r,count:a})=>`${t}-${r} de ${a}`,showFirstButton:!0,showLastButton:!0,getItemAriaLabel:t=>t==="first"?"Ir a la primera página":t==="last"?"Ir a la última página":t==="next"?"Ir a la página siguiente":"Regresar a la pagina anterior"})]})})}function ae(){return e.jsx(V,{sx:{mt:4,mb:4},children:e.jsx(te,{})})}function Ie(){return e.jsx(G,{title:"Importaciones",children:e.jsx(ae,{})})}export{Ie as default};
