import{q as k,x as f,j as e,r as v,s as b,w as F,L as I}from"./index-64ee5db4.js";import{d as L}from"./Upload-ac3461bd.js";import{u as P,d as S}from"./blocking-152574c3.js";import{B as D}from"./BooleanIndicator-c8c56839.js";import{l as q,p as y,g as z,a as $,b as E}from"./utils-ae6c9da2.js";import{T as H,a as _,b as O,c as j,d as t,e as A}from"./TableRow-8cb96c2e.js";import{S as G}from"./Stack-44fd4b01.js";import{L as N}from"./LoadingButton-d1fcde35.js";import{T as J}from"./TablePagination-99ffd7cc.js";import{B as K}from"./Backdrop-83b371ec.js";import{C as M}from"./constants-2e6fc461.js";import{T as Q}from"./Toolbar-85484bb9.js";import{P as U}from"./Paper-3ba8c3cc.js";import{L as V}from"./LinearProgress-1962e334.js";import{C as W}from"./Container-5ebdd271.js";import{P as X}from"./Page-9b18e939.js";import"./createSvgIcon-9ace6ece.js";import"./middleware-4ff88eea.js";import"./common-49ff51cc.js";import"./Close-63b124a7.js";import"./Tooltip-3e7b931d.js";import"./Popper-91005be0.js";import"./KeyboardArrowRight-69b7f4ee.js";import"./Toolbar-984ecaee.js";import"./Select-eabe2e08.js";import"./Menu-292a1a41.js";import"./MenuItem-99edd351.js";import"./dividerClasses-f4851a5f.js";import"./ArrowBack-afe2bf24.js";function Y({blockingDeviceList:a}){const n=k(),[m,g]=f(),[l,p,i,c,d]=P(r=>[r.getBlockingDeviceListFilters,r.setBlockingDeviceListFilters,r.buildBlockingDeviceConsolidatedReport,r.buildBlockingDeviceConsolidatedReportLoading,r.getBlockingDeviceList]),B=(r,s)=>{const o={...l,page:s};p(o),d(),g({perPage:String(o.perPage),page:String(o.page),q:o.q})},C=r=>{const s=parseInt(r.target.value),o={...l,perPage:s,page:0};p(o),d(),g({perPage:String(o.perPage),page:String(o.page),q:o.q})},T=(r,s)=>{r.stopPropagation(),r.preventDefault(),i({id:s,refreshBlockingDeviceListOnSuccess:!0})},w=r=>{n(`/tool/blocking/reports/${r}`)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsxs(_,{size:"small",children:[e.jsx(O,{children:e.jsxs(j,{children:[e.jsx(t,{children:"Fecha del reporte"}),e.jsx(t,{align:"right",children:"Total de archivos"}),e.jsx(t,{align:"right",children:"Tamaño total de los archivos"}),e.jsx(t,{align:"right",children:"Duración total de procesos"}),e.jsx(t,{align:"center",children:"Consolidado"}),e.jsx(t,{align:"right",children:"Acciones"})]})}),e.jsx(A,{children:a==null?void 0:a.data.map(({id:r,reportedAt:s,logProcess:o,logFile:h,isConsolidated:x,isLatestImported:u})=>e.jsxs(j,{selected:r===m.get("selected"),hover:!0,onClick:()=>w(r),sx:{cursor:"pointer"},children:[e.jsx(t,{children:!!s&&q({date:s,withTime:!1})}),e.jsx(t,{align:"right",children:h.length}),e.jsx(t,{align:"right",children:y(z(h))}),e.jsx(t,{align:"right",children:$(E(o))}),e.jsx(t,{align:"center",children:e.jsx(D,{value:x})}),e.jsx(t,{children:e.jsx(G,{direction:"row",spacing:1,justifyContent:"flex-end",children:e.jsx(N,{size:"small",color:"primary",loadingPosition:"start",startIcon:e.jsx(S,{}),onClick:R=>T(R,r),loading:c&&u,disabled:x||!u,children:"Generar Consolidado"})})})]},r))})]})}),e.jsx(J,{rowsPerPageOptions:[5,10,25,100],component:"div",count:(a==null?void 0:a.total)??0,rowsPerPage:l.perPage,page:(a==null?void 0:a.page)??0,onPageChange:B,onRowsPerPageChange:C,labelRowsPerPage:"Filas por página:",labelDisplayedRows:({from:r,to:s,count:o})=>`${r}-${s} de ${o}`,showFirstButton:!0,showLastButton:!0,getItemAriaLabel:r=>r==="first"?"Ir a la primera página":r==="last"?"Ir a la última página":r==="next"?"Ir a la página siguiente":"Regresar a la pagina anterior"}),e.jsx(K,{sx:{color:"#fff",zIndex:r=>r.zIndex.drawer+1},open:c,children:e.jsx(M,{color:"inherit"})})]})}function Z(){const[a]=f(),[n,m,g,l,p]=P(i=>[i.getBlockingDeviceListFilters,i.setBlockingDeviceListFilters,i.getBlockingDeviceList,i.getBlockingDeviceListLoading,i.blockingDeviceList]);return v.useEffect(()=>{const i=a.get("perPage"),c=a.get("page"),d=a.get("q");m({perPage:i!==null?parseInt(i):n.perPage,page:c!==null?parseInt(c):n.page,q:d??n.q}),g()},[]),e.jsx(b,{sx:{width:"100%",position:"relative"},children:e.jsxs(U,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsx(Q,{title:"Reportes HB",children:e.jsx(F,{size:"small",color:"primary",startIcon:e.jsx(L,{}),component:I,to:"/tool/blocking/reports/new",children:"Importar reporte"})}),l&&e.jsx(V,{sx:{position:"absolute",top:"0",left:0,right:0,borderTopLeftRadius:4,borderTopRightRadius:4}}),e.jsx(Y,{blockingDeviceList:p})]})})}function ee(){return e.jsx(W,{sx:{mt:4,mb:4},children:e.jsx(Z,{})})}function Le(){return e.jsx(X,{title:"Reportes HB",children:e.jsx(ee,{})})}export{Le as default};
