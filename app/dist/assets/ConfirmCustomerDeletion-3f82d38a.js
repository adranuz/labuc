import{r as l,j as r}from"./index-2f39f1ff.js";import{d as D,D as E,a as b,b as k,c as y,e as L}from"./Delete-054d3553.js";import{u as B}from"./common-2edd7306.js";import{a as S}from"./api-ff746449.js";import{B as n}from"./Page-6a23b43c.js";import{A as T}from"./Alert-4a13142a.js";import{B as v}from"./Box-69448d45.js";import{T as c}from"./Typography-0d07a002.js";import{L as w}from"./LoadingButton-4d47bd0e.js";function W({id:d,name:m,onFinished:p,disabled:u=!1}){const[h,a]=l.useState(!1),[f,o]=l.useState(!1),s=B(e=>e.showSnackbar),x=e=>{e.stopPropagation(),e.preventDefault(),a(!0)},i=e=>{e.stopPropagation(),e.preventDefault(),a(!1)},g=e=>{e.stopPropagation(),e.preventDefault(),j({id:d})},j=({id:e})=>{o(!0);const C=new URL(`${S}/customers/${e}`);fetch(C,{method:"DELETE"}).then(t=>t.json()).then(t=>{s("El cliente se eliminó corretamente","success"),p()}).catch(t=>s("Error al intentar eliminar el cliente","error")).finally(()=>{a(!1),o(!1)})};return r.jsxs(r.Fragment,{children:[r.jsx(n,{size:"small",color:"error",startIcon:r.jsx(D,{}),onClick:e=>x(e),disabled:u,children:"Eliminar"}),r.jsxs(E,{fullWidth:!0,maxWidth:"sm",open:h,onClose:e=>i(e),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[r.jsx(b,{id:"alert-dialog-title",children:"Eliminar cliente"}),r.jsxs(k,{children:[r.jsxs(y,{id:"alert-dialog-description",children:[r.jsx(T,{severity:"warning",color:"error",children:"Depués de eliminar un cliente, este se borra de manera permanente. Esta acción no se puede deshacer."}),r.jsxs(v,{m:2,children:[r.jsx(c,{variant:"caption",children:"Nombre del cliente"}),r.jsx(c,{mt:1,color:"black",children:m})]})]}),r.jsxs(L,{children:[r.jsx(n,{size:"small",onClick:i,children:"Cancelar"}),r.jsx(w,{loading:f,variant:"contained",color:"error",size:"small",disableElevation:!0,autoFocus:!0,onClick:g,children:"Eliminar"})]})]})]})]})}export{W as C};
