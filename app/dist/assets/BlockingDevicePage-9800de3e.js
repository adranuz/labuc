import{j as e,s as C,r as g,y as P}from"./index-32292c13.js";import{T as x}from"./Toolbar-d70cb619.js";import{C as B}from"./constants-a5768e35.js";import{u as c,d as F}from"./blocking-fc22908c.js";import{B as k}from"./BooleanIndicator-1a20fded.js";import{l as w,p as D,g as y,a as b,b as R,c as z}from"./utils-ae6c9da2.js";import{T as h,a as j,b as m,c as l,d as i,e as p}from"./TableRow-2aaefee4.js";import{S}from"./Stack-b443227d.js";import{L as E}from"./LoadingButton-e0ccb8bc.js";import{B as G}from"./Backdrop-752351c6.js";import{P as u}from"./Paper-d19b285b.js";import{C as H}from"./Container-430f5354.js";import{G as d}from"./Grid-003d548d.js";import{P as N}from"./Page-163afb69.js";import"./ArrowBack-77e9619e.js";import"./createSvgIcon-abbd2357.js";import"./Toolbar-c06937fa.js";import"./middleware-4d18dae0.js";import"./common-f0c17bc9.js";import"./Close-22468df7.js";import"./Tooltip-64f1a3d2.js";import"./Popper-c4f5970e.js";function f({show:r,disablePadding:o=!1,sizeLoader:s=42}){return r?e.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},padding:o?0:2,children:e.jsx(B,{size:s})}):e.jsx(e.Fragment,{})}function A({blockingDevice:r}){const[o,s]=c(a=>[a.buildBlockingDeviceConsolidatedReport,a.buildBlockingDeviceConsolidatedReportLoading]);if(r===void 0)return e.jsx(e.Fragment,{});const{reportedAt:t,logFile:n,logProcess:L,isConsolidated:v}=r,T=(a,I)=>{a.stopPropagation(),a.preventDefault(),o({id:I,refreshBlockingDeviceOnSuccess:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsxs(j,{size:"small",children:[e.jsx(m,{children:e.jsxs(l,{children:[e.jsx(i,{variant:"footer",children:"Fecha del reporte"}),e.jsx(i,{variant:"footer",align:"right",children:"Total de archivos"}),e.jsx(i,{variant:"footer",align:"right",children:"Tama침o total de los archivos"}),e.jsx(i,{variant:"footer",align:"right",children:"Duraci칩n total de procesos"}),e.jsx(i,{variant:"footer",align:"center",children:"Consolidado"}),e.jsx(i,{variant:"footer",align:"right",children:"Acciones"})]})}),e.jsx(p,{children:e.jsxs(l,{children:[e.jsx(i,{variant:"head",children:w({date:t,withTime:!1})}),e.jsx(i,{variant:"head",align:"right",children:n.length}),e.jsx(i,{variant:"head",align:"right",children:D(y(n))}),e.jsx(i,{variant:"head",align:"right",children:b(R(L))}),e.jsx(i,{variant:"head",align:"center",children:e.jsx(k,{value:v})}),e.jsx(i,{children:e.jsx(S,{direction:"row",spacing:1,justifyContent:"flex-end",children:e.jsx(E,{size:"small",color:"primary",loadingPosition:"start",startIcon:e.jsx(F,{}),onClick:a=>T(a,r.id),loading:s,disabled:v,children:"Generar Consolidado"})})})]})})]})}),e.jsx(G,{sx:{color:"#fff",zIndex:a=>a.zIndex.drawer+1},open:s,children:e.jsx(B,{color:"inherit"})})]})}function O({id:r}){const[o,s,t]=c(n=>[n.getBlockingDevice,n.getBlockingDeviceLoading,n.blockingDevice]);return g.useEffect(()=>{o(r)},[]),e.jsxs(u,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsx(f,{show:s}),!s&&e.jsx(A,{blockingDevice:t})]})}function _({logProcess:r}){return e.jsx(h,{children:e.jsxs(j,{size:"small",children:[e.jsx(m,{children:e.jsxs(l,{children:[e.jsx(i,{}),e.jsx(i,{children:"Nombre"}),e.jsx(i,{align:"right",children:"Duraci칩n"})]})}),e.jsx(p,{children:r==null?void 0:r.map(({name:o,createdAt:s,finishedAt:t},n)=>e.jsxs(l,{hover:!0,children:[e.jsx(i,{align:"center",padding:"checkbox",children:e.jsx(k,{value:!!t})}),e.jsx(i,{children:o}),e.jsx(i,{align:"right",children:b(z(s,t))})]},n))})]})})}function q({id:r}){const[o,s,t]=c(n=>[n.getBlockingDeviceImportLogProcess,n.getBlockingDeviceImportLogProcessLoading,n.blockingDeviceImportLogProcess]);return g.useEffect(()=>{o(r)},[]),e.jsxs(u,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsx(x,{title:"Log de procesos"}),e.jsx(f,{show:s}),!s&&e.jsx(_,{logProcess:t})]})}function J({logFile:r}){return e.jsx(h,{sx:{maxHeight:475},children:e.jsxs(j,{size:"small",children:[e.jsx(m,{children:e.jsxs(l,{children:[e.jsx(i,{children:"Nombre"}),e.jsx(i,{children:"Tipo"}),e.jsx(i,{align:"right",children:"Tama침o"})]})}),e.jsx(p,{children:r==null?void 0:r.map(({originalName:o,mimeType:s,size:t},n)=>e.jsxs(l,{hover:!0,children:[e.jsx(i,{children:o}),e.jsx(i,{children:s.split("/")[1]}),e.jsx(i,{align:"right",children:D(t)})]},n))})]})})}function K({id:r}){const[o,s,t]=c(n=>[n.getBlockingDeviceImportLogFile,n.getBlockingDeviceImportLogFileLoading,n.blockingDeviceImportLogFile]);return g.useEffect(()=>{o(r)},[]),e.jsxs(u,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsx(x,{title:"Log de archivos"}),e.jsx(f,{show:s}),!s&&e.jsx(J,{logFile:t})]})}function M(){const r=P(),{id:o}=r;return e.jsxs(H,{sx:{mt:4,mb:4},children:[e.jsx(x,{title:"Reporte HB",pathRouteForBackButton:"/tool/blocking/reports",disableGutters:!0}),o!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(O,{id:o}),e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(q,{id:o})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(K,{id:o})})]})]})]})}function je(){return e.jsx(N,{title:"Reporte HB",children:e.jsx(M,{})})}export{je as default};
