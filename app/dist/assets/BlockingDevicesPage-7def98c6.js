import{q as k,x as f,j as e,r as v,s as b,w as F,L as I}from"./index-32292c13.js";import{d as L}from"./Upload-06298009.js";import{u as P,d as S}from"./blocking-fc22908c.js";import{B as D}from"./BooleanIndicator-1a20fded.js";import{l as q,p as y,g as z,a as $,b as E}from"./utils-ae6c9da2.js";import{T as H,a as _,b as O,c as j,d as t,e as A}from"./TableRow-2aaefee4.js";import{S as G}from"./Stack-b443227d.js";import{L as N}from"./LoadingButton-e0ccb8bc.js";import{T as J}from"./TablePagination-b1f8bda9.js";import{B as K}from"./Backdrop-752351c6.js";import{C as M}from"./constants-a5768e35.js";import{T as Q}from"./Toolbar-d70cb619.js";import{P as U}from"./Paper-d19b285b.js";import{L as V}from"./LinearProgress-2186b45d.js";import{C as W}from"./Container-430f5354.js";import{P as X}from"./Page-163afb69.js";import"./createSvgIcon-abbd2357.js";import"./middleware-4d18dae0.js";import"./common-f0c17bc9.js";import"./Close-22468df7.js";import"./Tooltip-64f1a3d2.js";import"./Popper-c4f5970e.js";import"./KeyboardArrowRight-8567b424.js";import"./Toolbar-c06937fa.js";import"./Select-1f7de27f.js";import"./Menu-3217b6b0.js";import"./MenuItem-416c8a5f.js";import"./dividerClasses-39a22909.js";import"./ArrowBack-77e9619e.js";function Y({blockingDeviceList:a}){const n=k(),[m,g]=f(),[l,p,i,c,d]=P(r=>[r.getBlockingDeviceListFilters,r.setBlockingDeviceListFilters,r.buildBlockingDeviceConsolidatedReport,r.buildBlockingDeviceConsolidatedReportLoading,r.getBlockingDeviceList]),B=(r,s)=>{const o={...l,page:s};p(o),d(),g({perPage:String(o.perPage),page:String(o.page),q:o.q})},C=r=>{const s=parseInt(r.target.value),o={...l,perPage:s,page:0};p(o),d(),g({perPage:String(o.perPage),page:String(o.page),q:o.q})},T=(r,s)=>{r.stopPropagation(),r.preventDefault(),i({id:s,refreshBlockingDeviceListOnSuccess:!0})},w=r=>{n(`/tool/blocking/reports/${r}`)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsxs(_,{size:"small",children:[e.jsx(O,{children:e.jsxs(j,{children:[e.jsx(t,{children:"Fecha del reporte"}),e.jsx(t,{align:"right",children:"Total de archivos"}),e.jsx(t,{align:"right",children:"Tamaño total de los archivos"}),e.jsx(t,{align:"right",children:"Duración total de procesos"}),e.jsx(t,{align:"center",children:"Consolidado"}),e.jsx(t,{align:"right",children:"Acciones"})]})}),e.jsx(A,{children:a==null?void 0:a.data.map(({id:r,reportedAt:s,logProcess:o,logFile:h,isConsolidated:x,isLatestImported:u})=>e.jsxs(j,{selected:r===m.get("selected"),hover:!0,onClick:()=>w(r),sx:{cursor:"pointer"},children:[e.jsx(t,{children:!!s&&q({date:s,withTime:!1})}),e.jsx(t,{align:"right",children:h.length}),e.jsx(t,{align:"right",children:y(z(h))}),e.jsx(t,{align:"right",children:$(E(o))}),e.jsx(t,{align:"center",children:e.jsx(D,{value:x})}),e.jsx(t,{children:e.jsx(G,{direction:"row",spacing:1,justifyContent:"flex-end",children:e.jsx(N,{size:"small",color:"primary",loadingPosition:"start",startIcon:e.jsx(S,{}),onClick:R=>T(R,r),loading:c&&u,disabled:x||!u,children:"Generar Consolidado"})})})]},r))})]})}),e.jsx(J,{rowsPerPageOptions:[5,10,25,100],component:"div",count:(a==null?void 0:a.total)??0,rowsPerPage:l.perPage,page:(a==null?void 0:a.page)??0,onPageChange:B,onRowsPerPageChange:C,labelRowsPerPage:"Filas por página:",labelDisplayedRows:({from:r,to:s,count:o})=>`${r}-${s} de ${o}`,showFirstButton:!0,showLastButton:!0,getItemAriaLabel:r=>r==="first"?"Ir a la primera página":r==="last"?"Ir a la última página":r==="next"?"Ir a la página siguiente":"Regresar a la pagina anterior"}),e.jsx(K,{sx:{color:"#fff",zIndex:r=>r.zIndex.drawer+1},open:c,children:e.jsx(M,{color:"inherit"})})]})}function Z(){const[a]=f(),[n,m,g,l,p]=P(i=>[i.getBlockingDeviceListFilters,i.setBlockingDeviceListFilters,i.getBlockingDeviceList,i.getBlockingDeviceListLoading,i.blockingDeviceList]);return v.useEffect(()=>{const i=a.get("perPage"),c=a.get("page"),d=a.get("q");m({perPage:i!==null?parseInt(i):n.perPage,page:c!==null?parseInt(c):n.page,q:d??n.q}),g()},[]),e.jsx(b,{sx:{width:"100%",position:"relative"},children:e.jsxs(U,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsx(Q,{title:"Reportes HB",children:e.jsx(F,{size:"small",color:"primary",startIcon:e.jsx(L,{}),component:I,to:"/tool/blocking/reports/new",children:"Importar reporte"})}),l&&e.jsx(V,{sx:{position:"absolute",top:"0",left:0,right:0,borderTopLeftRadius:4,borderTopRightRadius:4}}),e.jsx(Y,{blockingDeviceList:p})]})})}function ee(){return e.jsx(W,{sx:{mt:4,mb:4},children:e.jsx(Z,{})})}function Le(){return e.jsx(X,{title:"Reportes HB",children:e.jsx(ee,{})})}export{Le as default};
