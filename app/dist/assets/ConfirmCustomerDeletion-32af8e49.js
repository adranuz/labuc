import{r as n,j as r}from"./index-3b2b324b.js";import{d as D,D as E,a as b,b as k,c as y,e as L}from"./Delete-65a8b1e4.js";import{u as B}from"./common-9cf73853.js";import{a as S}from"./api-ff746449.js";import{B as l}from"./Page-f1507415.js";import{A as T}from"./Alert-f098536b.js";import{B as v}from"./Box-5e0d6611.js";import{T as c}from"./Typography-26330211.js";import{L as w}from"./LoadingButton-3db6a78e.js";function W({id:d,name:m,onFinished:p,disabled:u=!1}){const[h,t]=n.useState(!1),[f,o]=n.useState(!1),i=B(e=>e.showSnackbar),x=e=>{e.stopPropagation(),e.preventDefault(),t(!0)},s=e=>{e.stopPropagation(),e.preventDefault(),t(!1)},g=e=>{e.stopPropagation(),e.preventDefault(),j({id:d})},j=({id:e})=>{o(!0);const C=new URL(`${S}/customers/${e}`);fetch(C,{method:"DELETE"}).then(a=>a.json()).then(a=>{i("El cliente se eliminó corretamente","success"),p()}).catch(a=>i("Error al intentar eliminar el cliente","error")).finally(()=>{t(!1),o(!1)})};return r.jsxs(r.Fragment,{children:[r.jsx(l,{size:"small",color:"error",startIcon:r.jsx(D,{}),onClick:e=>x(e),disabled:u,children:"Eliminar"}),r.jsxs(E,{fullWidth:!0,maxWidth:"sm",open:h,onClose:e=>s(e),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[r.jsx(b,{id:"alert-dialog-title",children:"Eliminar cliente"}),r.jsxs(k,{children:[r.jsxs(y,{id:"alert-dialog-description",children:[r.jsx(T,{severity:"warning",color:"error",children:"Depués de eliminar un cliente, este se borra de manera permanente. Esta acción no se puede deshacer."}),r.jsxs(v,{m:2,children:[r.jsx(c,{variant:"caption",children:"Nombre del cliente"}),r.jsx(c,{mt:1,color:"black",children:m})]})]}),r.jsxs(L,{children:[r.jsx(l,{size:"small",onClick:s,children:"Cancelar"}),r.jsx(w,{loading:f,variant:"contained",color:"error",size:"small",loadingPosition:"start",disableElevation:!0,autoFocus:!0,onClick:g,children:"Eliminar"})]})]})]})]})}export{W as C};
