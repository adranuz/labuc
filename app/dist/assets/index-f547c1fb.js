import{h as S,r as l,j as o}from"./index-34ad4850.js";import{o as w,s as m,u as b,C as d,t as C}from"./zod-000b1e5e.js";import{L as y,a as v}from"./api-27aaaf1f.js";import{T}from"./Typography-9c675a68.js";import{C as I,a as P}from"./CardContent-5eeabc93.js";import{B as q}from"./Box-75332173.js";import{T as c}from"./TextField-54995e8a.js";import{I as B}from"./InputAdornment-937012d0.js";import{I as L}from"./IconButton-eaa1ff04.js";import{a as k,V as F}from"./VisibilityOff-912c72a8.js";import{P as V}from"./Page-71ea8f73.js";import"./styled-db9bd02e.js";import"./Select-4e098193.js";import"./Menu-f695c361.js";const z=w({email:m({required_error:"Se requiere la dirección de correo electrónico"}).min(1,{message:"Se requiere la dirección de correo electrónico"}).email("La dirección de correo electrónico es inválida"),password:m({required_error:"Se requiere la contraseña"}).min(1,{message:"Se requiere la contraseña"})});function A(){const u=S(),[a,p]=l.useState(!1),[h,r]=l.useState(!1),f=()=>p(t=>!t),x=t=>{t.preventDefault()},{control:s,handleSubmit:g,formState:{errors:e}}=b({resolver:C(z)}),j=({email:t,password:n})=>{r(!0),fetch(`${v}/login`,{method:"POST",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{i!=null&&i.token&&(localStorage.setItem("token",i.token),u("/"))}).finally(()=>r(!1))};return o.jsxs(o.Fragment,{children:[o.jsx(T,{component:"h2",variant:"h5",gutterBottom:!0,children:"Iniciar sesión"}),o.jsx(I,{variant:"outlined",children:o.jsx(P,{children:o.jsxs(q,{component:"form",onSubmit:g(j),noValidate:!0,children:[o.jsx(d,{name:"email",control:s,render:({field:t})=>{var n;return o.jsx(c,{margin:"normal",required:!0,fullWidth:!0,size:"small",label:"Correo electrónico",autoFocus:!0,autoComplete:"email",error:!!(e!=null&&e.email),helperText:(e==null?void 0:e.email)!==null?(n=e==null?void 0:e.email)==null?void 0:n.message:null,...t})}}),o.jsx(d,{name:"password",control:s,render:({field:t})=>{var n;return o.jsx(c,{margin:"normal",required:!0,fullWidth:!0,size:"small",label:"Contraseña",type:a?"text":"password",error:!!(e!=null&&e.password),helperText:(e==null?void 0:e.password)!==null?(n=e==null?void 0:e.password)==null?void 0:n.message:null,...t,InputProps:{endAdornment:o.jsx(B,{position:"end",children:o.jsx(L,{"aria-label":"Alternar la visibilidad de la contraseña",onClick:f,onMouseDown:x,edge:"end",children:a?o.jsx(k,{}):o.jsx(F,{})})})}})}}),o.jsx(y,{loading:h,variant:"contained",size:"small",sx:{mt:1},fullWidth:!0,disableElevation:!0,type:"submit",children:"Continuar"})]})})})]})}function Q(){return o.jsx(V,{title:"Iniciar sesión",children:o.jsx(A,{})})}export{Q as default};
