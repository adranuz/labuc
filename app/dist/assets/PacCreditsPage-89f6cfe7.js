import{x as g,r as o,j as s}from"./index-32292c13.js";import{T as S}from"./Toolbar-d70cb619.js";import{S as j,a as v}from"./StatsCard-12cfc94c.js";import{A}from"./constants-a5768e35.js";import{l as I,d as b}from"./utils-ae6c9da2.js";import{C as L}from"./Container-430f5354.js";import{P as T}from"./Paper-d19b285b.js";import{G as c}from"./Grid-003d548d.js";import{P as w}from"./Page-163afb69.js";import"./ArrowBack-77e9619e.js";import"./createSvgIcon-abbd2357.js";import"./Toolbar-c06937fa.js";import"./Backdrop-752351c6.js";import"./FormControl-1302c8b4.js";import"./Select-1f7de27f.js";import"./Menu-3217b6b0.js";import"./MenuItem-416c8a5f.js";import"./dividerClasses-39a22909.js";import"./ArrowForward-5694569f.js";import"./CardContent-9b693bcc.js";import"./CardHeader-b4119aa6.js";import"./Divider-036b3b5e.js";function D(){const[i,l]=g(),[p,u]=o.useState(!1),[e,C]=o.useState(void 0),[f,h]=o.useState([]),[a,P]=o.useState(void 0),d=r=>{C(r),i.set("customerId",r.id),l(i)};o.useEffect(()=>{e!==void 0&&x(e.id)},[e]);const x=r=>{u(!0);const n=new URL(`${A}/pac/customers/${r}/stats`);fetch(n).then(async t=>await t.json()).then(t=>{const m=[{name:"General",value:(t==null?void 0:t.generalCount)??0,status:void 0},{name:"Anulados",value:(t==null?void 0:t.statusAnulCount)??0,status:"ANUL"},{name:"Cancelados",value:(t==null?void 0:t.statusCancCount)??0,status:"CANC"},{name:"Mora",value:(t==null?void 0:t.statusMoraCount)??0,status:"MORA"},{name:"Pendientes",value:(t==null?void 0:t.statusPendCount)??0,status:"PEND"}];h(m),P(t==null?void 0:t.createdAt)}).finally(()=>u(!1))};return s.jsx(L,{sx:{mt:4,mb:4},children:s.jsxs(T,{variant:"outlined",sx:{width:"100%",mb:2,pt:1},children:[s.jsx(S,{title:"Créditos PAC",children:s.jsx(j,{onChange:d,defaultCustomerId:i.get("customerId"),hasProducts:["lms"]})}),s.jsx(c,{container:!0,spacing:3,marginTop:1,padding:3,children:f.map(({name:r,value:n,status:t},m)=>s.jsx(c,{item:!0,xs:12,md:3,children:s.jsx(v,{title:r,subtitle:a&&"Total al "+I({date:a,withTime:!1}),value:n,isLoading:p,href:`/tool/pac/credits/report?${b({customerId:e==null?void 0:e.id,status:t})}`,goToLabel:"Ver"})},m))})]})})}function Y(){return s.jsx(w,{title:"Créditos PAC",children:s.jsx(D,{})})}export{Y as default};
