import{f as S,r as l,j as o}from"./index-ac188f65.js";import{o as w,s as m,u as b,C as d,t as C}from"./zod-d70736a0.js";import{a as y}from"./api-ff746449.js";import{T as v}from"./Typography-f4c329c2.js";import{C as P,a as T}from"./CardContent-7816c3b5.js";import{B as I}from"./Box-2099d454.js";import{T as c}from"./TextField-85daf831.js";import{I as q}from"./InputAdornment-f95fafb1.js";import{I as B}from"./Menu-cc1ec0f3.js";import{a as L,V as k}from"./VisibilityOff-39f37399.js";import{L as F}from"./LoadingButton-a21a2d58.js";import{P as V}from"./Page-26c9b60a.js";import"./styled-3f9e6ac5.js";import"./Select-8053c5b6.js";import"./Backdrop-ed2d8653.js";const z=w({email:m({required_error:"Se requiere la dirección de correo electrónico"}).min(1,{message:"Se requiere la dirección de correo electrónico"}).email("La dirección de correo electrónico es inválida"),password:m({required_error:"Se requiere la contraseña"}).min(1,{message:"Se requiere la contraseña"})});function A(){const u=S(),[r,p]=l.useState(!1),[f,a]=l.useState(!1),h=()=>p(t=>!t),g=t=>{t.preventDefault()},{control:s,handleSubmit:x,formState:{errors:e}}=b({resolver:C(z)}),j=({email:t,password:i})=>{a(!0),fetch(`${y}/login`,{method:"POST",body:JSON.stringify({email:t,password:i}),headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{n!=null&&n.token&&(localStorage.setItem("token",n.token),u("/"))}).finally(()=>a(!1))};return o.jsxs(o.Fragment,{children:[o.jsx(v,{variant:"h5",component:"h2",gutterBottom:!0,children:"Iniciar sesión"}),o.jsx(P,{variant:"outlined",children:o.jsx(T,{children:o.jsxs(I,{component:"form",onSubmit:x(j),noValidate:!0,children:[o.jsx(d,{name:"email",control:s,render:({field:t})=>{var i;return o.jsx(c,{margin:"normal",required:!0,fullWidth:!0,size:"small",label:"Correo electrónico",autoFocus:!0,autoComplete:"email",error:!!(e!=null&&e.email),helperText:(e==null?void 0:e.email)!==null?(i=e==null?void 0:e.email)==null?void 0:i.message:null,...t})}}),o.jsx(d,{name:"password",control:s,render:({field:t})=>{var i;return o.jsx(c,{margin:"normal",required:!0,fullWidth:!0,size:"small",label:"Contraseña",type:r?"text":"password",error:!!(e!=null&&e.password),helperText:(e==null?void 0:e.password)!==null?(i=e==null?void 0:e.password)==null?void 0:i.message:null,...t,InputProps:{endAdornment:o.jsx(q,{position:"end",children:o.jsx(B,{"aria-label":"Alternar la visibilidad de la contraseña",onClick:h,onMouseDown:g,edge:"end",children:r?o.jsx(L,{}):o.jsx(k,{})})})}})}}),o.jsx(F,{loading:f,variant:"contained",size:"small",loadingPosition:"start",sx:{mt:1},fullWidth:!0,disableElevation:!0,type:"submit",children:"Continuar"})]})})})]})}function X(){return o.jsx(V,{title:"Iniciar sesión",children:o.jsx(A,{})})}export{X as default};
