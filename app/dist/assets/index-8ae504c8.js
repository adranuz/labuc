import{j as e,r as f,E as S,g as v,q as H,x as N,s as K,w as q,T as V}from"./index-32292c13.js";import{b as G,c as J}from"./Delete-298fa468.js";import{d as Q}from"./Search-c858a086.js";import{r as _,i as w}from"./createSvgIcon-abbd2357.js";import{d as X,C as Y}from"./ConfirmCustomerDeletion-d56f0a77.js";import{T as Z}from"./Toolbar-d70cb619.js";import{A as ee}from"./constants-a5768e35.js";import{u as k,P as te}from"./Paper-d19b285b.js";import{I as re}from"./Select-1f7de27f.js";import{L as ae}from"./LinearProgress-2186b45d.js";import{T as ie,a as se,b as ne,c as L,d as n,e as oe}from"./TableRow-2aaefee4.js";import{S as b}from"./Stack-b443227d.js";import{T as P}from"./Tooltip-64f1a3d2.js";import{T as le}from"./TablePagination-b1f8bda9.js";import{C as ce}from"./Container-430f5354.js";import{P as de}from"./Page-163afb69.js";import"./DialogActions-c49c2bf1.js";import"./Backdrop-752351c6.js";import"./Menu-3217b6b0.js";import"./common-f0c17bc9.js";import"./middleware-4d18dae0.js";import"./Alert-c2f8e205.js";import"./LoadingButton-e0ccb8bc.js";import"./ArrowBack-77e9619e.js";import"./Toolbar-c06937fa.js";import"./Popper-c4f5970e.js";import"./KeyboardArrowRight-8567b424.js";import"./MenuItem-416c8a5f.js";import"./dividerClasses-39a22909.js";var I={},pe=w;Object.defineProperty(I,"__esModule",{value:!0});var O=I.default=void 0,ue=pe(_()),ge=e,he=(0,ue.default)((0,ge.jsx)("path",{d:"m17.6 9.48 1.84-3.18c.16-.31.04-.69-.26-.85-.29-.15-.65-.06-.83.22l-1.88 3.24c-2.86-1.21-6.08-1.21-8.94 0L5.65 5.67c-.19-.29-.58-.38-.87-.2-.28.18-.37.54-.22.83L6.4 9.48C3.3 11.25 1.28 14.44 1 18h22c-.28-3.56-2.3-6.75-5.4-8.52zM7 15.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zm10 0c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25z"}),"Android");O=I.default=he;var R={},me=w;Object.defineProperty(R,"__esModule",{value:!0});var D=R.default=void 0;je(f);var fe=me(_()),xe=e;function M(t){if(typeof WeakMap!="function")return null;var l=new WeakMap,o=new WeakMap;return(M=function(c){return c?o:l})(t)}function je(t,l){if(!l&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var o=M(l);if(o&&o.has(t))return o.get(t);var c={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var u=x?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(c,i,u):c[i]=t[i]}return c.default=t,o&&o.set(t,c),c}var ve=(0,fe.default)((0,xe.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"}),"Apple");D=R.default=ve;var y={},Pe=w;Object.defineProperty(y,"__esModule",{value:!0});var A=y.default=void 0,Ce=Pe(_()),be=e,Se=(0,Ce.default)((0,be.jsx)("path",{d:"M20 18v-1c1.1 0 1.99-.9 1.99-2L22 5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2v1H0v2h24v-2h-4zM4 5h16v10H4V5z"}),"LaptopWindows");A=y.default=Se;const _e=S("div")(({theme:t})=>({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:k().palette.mode==="dark"?v(t.palette.common.white,.15):v(t.palette.common.black,.05),"&:hover":{backgroundColor:k().palette.mode==="dark"?v(t.palette.common.white,.25):v(t.palette.common.black,.15)},marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{marginLeft:t.spacing(1),width:"auto"}})),we=S("div")(({theme:t})=>({padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"})),Ie=S(re)(({theme:t})=>({color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:`calc(1em + ${t.spacing(4)})`,transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function Re(){var $;const t=H(),[l,o]=N(),[c,x]=f.useState(!1),[i,u]=f.useState({}),[p,C]=f.useState({perPage:parseInt(l.get("perPage")??"10"),page:parseInt(l.get("page")??"0"),q:l.get("q")??""});f.useEffect(()=>{h(p)},[]);const h=({perPage:r,page:s,q:a})=>{x(!0);const m=new URL(`${ee}/customers`),j={perPage:String(r),page:String(s),q:a};m.search=new URLSearchParams(j).toString(),fetch(m).then(async g=>await g.json()).then(g=>{u(g)}).finally(()=>x(!1))},B=(r,s)=>{const a={...p,page:s};C(a),h(a),o({perPage:String(a.perPage),page:String(a.page),q:a.q})},E=r=>{const s=parseInt(r.target.value),a={...p,perPage:s,page:0};C(a),h(a),o({perPage:String(a.perPage),page:String(a.page),q:a.q})},z=r=>{const s=r.target.value,a={...p,q:s,page:0};C(a),h(a),o({perPage:String(a.perPage),page:String(a.page),q:a.q})},W=(r,s)=>{r.stopPropagation(),r.preventDefault(),t(`/admin/customers/${s}/edit`,{state:p})},F=()=>{t("/admin/customers/create")},U=r=>{t(`/admin/customers/${r}`,{state:p})};return e.jsx(K,{sx:{width:"100%",position:"relative"},children:e.jsxs(te,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsxs(Z,{title:"Clientes",children:[e.jsxs(_e,{children:[e.jsx(we,{children:e.jsx(Q,{})}),e.jsx(Ie,{placeholder:"Buscar…",type:"search",inputProps:{"aria-label":"search"},onChange:z,defaultValue:l.get("q")})]}),e.jsx(q,{size:"small",color:"primary",startIcon:e.jsx(G,{}),onClick:()=>F(),disabled:!0,children:"Agregar"})]}),c&&e.jsx(ae,{sx:{position:"absolute",top:"0",left:0,right:0,borderTopLeftRadius:4,borderTopRightRadius:4}}),e.jsx(ie,{children:e.jsxs(se,{size:"small",children:[e.jsx(ne,{children:e.jsxs(L,{children:[e.jsx(n,{children:"ID"}),e.jsx(n,{children:"Nombre"}),e.jsx(n,{align:"center",children:"Productos"}),e.jsx(n,{align:"center",children:"Dispositivos"}),e.jsx(n,{children:"SKU Start"}),e.jsx(n,{children:"SKU End"}),e.jsx(n,{align:"right",children:"Acciones"})]})}),e.jsx(oe,{children:($=i==null?void 0:i.data)==null?void 0:$.map(r=>{var s,a,m,j,g,T;return e.jsxs(L,{hover:!0,onClick:()=>U(r.id),sx:{cursor:"pointer"},children:[e.jsx(n,{children:r.customId}),e.jsx(n,{children:r.name}),e.jsx(n,{children:e.jsxs(b,{direction:"row",spacing:1,justifyContent:"center",children:[e.jsx(V,{children:(s=r.products)==null?void 0:s.length}),e.jsx(P,{title:((a=r.products)==null?void 0:a.length)===0?e.jsx("em",{children:"Sin productos"}):(m=r.products)==null?void 0:m.map(d=>e.jsxs("div",{children:[d.name,e.jsx("br",{})]})),arrow:!0,children:e.jsx(X,{color:"info"})})]})}),e.jsx(n,{children:e.jsxs(b,{direction:"row",spacing:.5,justifyContent:"center",children:[e.jsx(P,{title:"Android",children:e.jsx(O,{color:(j=r.devices)!=null&&j.find(d=>d==="android")?"primary":"disabled"})}),e.jsx(P,{title:"iOS",children:e.jsx(D,{color:(g=r.devices)!=null&&g.find(d=>d==="ios")?"primary":"disabled"})}),e.jsx(P,{title:"Windows",children:e.jsx(A,{color:(T=r.devices)!=null&&T.find(d=>d==="windows")?"primary":"disabled"})})]})}),e.jsx(n,{children:r.skuStart}),e.jsx(n,{children:r.skuEnd}),e.jsx(n,{children:e.jsxs(b,{direction:"row",spacing:1,justifyContent:"flex-end",children:[e.jsx(q,{size:"small",color:"info",startIcon:e.jsx(J,{}),onClick:d=>W(d,r.id),children:"Editar"}),e.jsx(Y,{id:r.id,name:r.name,onFinished:()=>h(p)})]})})]},r.id)})})]})}),e.jsx(le,{rowsPerPageOptions:[5,10,25,100],component:"div",count:(i==null?void 0:i.total)??0,rowsPerPage:p.perPage,page:(i==null?void 0:i.page)??0,onPageChange:B,onRowsPerPageChange:E,labelRowsPerPage:"Filas por página:",labelDisplayedRows:({from:r,to:s,count:a})=>`${r}-${s} de ${a}`,showFirstButton:!0,showLastButton:!0,getItemAriaLabel:r=>r==="first"?"Ir a la primera página":r==="last"?"Ir a la última página":r==="next"?"Ir a la página siguiente":"Regresar a la pagina anterior"})]})})}function ye(){return e.jsx(ce,{sx:{mt:4,mb:4},children:e.jsx(Re,{})})}function it(){return e.jsx(de,{title:"Clientes",children:e.jsx(ye,{})})}export{it as default};
