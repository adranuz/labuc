import{b as p,f as L,i as D,r as g,j as e}from"./index-e06af375.js";import{f as A,g as z}from"./Delete-9e7a1fdf.js";import{d as U}from"./Search-2636f8fe.js";import{d as W,a as N,b as O}from"./LaptopWindows-c24678eb.js";import{d as G,C as H}from"./ConfirmCustomerDeletion-4989ce86.js";import{a as M}from"./api-ff746449.js";import{E as j}from"./styled-bbf70655.js";import{b as S,P as V,T as v}from"./Typography-c441fe83.js";import{I as J}from"./Select-29c49290.js";import{B as I}from"./Box-88fb8089.js";import{T as K}from"./Toolbar-7d3cc063.js";import{B as k,P as Q}from"./Page-a29a2f01.js";import{L as X,T as Y,a as Z,b as ee,c as w,d as n,e as ae}from"./TableRow-678e0e34.js";import{S as f}from"./Stack-bbdf002a.js";import{T as m}from"./Tooltip-a8c9a2ec.js";import{C as se}from"./Chip-717d6f4c.js";import{T as re}from"./TablePagination-a829e87d.js";import{C as te}from"./Container-4a502da1.js";import"./Backdrop-d96c61dd.js";import"./Menu-e27c80cb.js";import"./createSvgIcon-af59304e.js";import"./common-5771c6fd.js";import"./Alert-ffb24b91.js";import"./LoadingButton-3a7488f1.js";import"./KeyboardArrowRight-c2d3ced0.js";import"./MenuItem-1db8f761.js";import"./dividerClasses-9e04b6de.js";const ie=j("div")(({theme:r})=>({position:"relative",borderRadius:r.shape.borderRadius,backgroundColor:S().palette.mode==="dark"?p(r.palette.common.white,.15):p(r.palette.common.black,.05),"&:hover":{backgroundColor:S().palette.mode==="dark"?p(r.palette.common.white,.25):p(r.palette.common.black,.15)},marginLeft:0,width:"100%",[r.breakpoints.up("sm")]:{marginLeft:r.spacing(1),width:"auto"}})),ne=j("div")(({theme:r})=>({padding:r.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"})),oe=j(J)(({theme:r})=>({color:"inherit","& .MuiInputBase-input":{padding:r.spacing(1,1,1,0),paddingLeft:`calc(1em + ${r.spacing(4)})`,transition:r.transitions.create("width"),width:"100%",[r.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function le(){var C;const r=L(),[d,h]=D(),[y,b]=g.useState(!1),[o,T]=g.useState({}),[l,u]=g.useState({perPage:parseInt(d.get("perPage")||"10"),page:parseInt(d.get("page")||"0"),q:d.get("q")||""});g.useEffect(()=>{c(l)},[]);const c=({perPage:a,page:t,q:s})=>{b(!0);const i=new URL(`${M}/customers`),F={perPage:String(a),page:String(t),q:s};i.search=new URLSearchParams(F).toString(),fetch(i).then(x=>x.json()).then(x=>{T(x)}).finally(()=>b(!1))},$=(a,t)=>{const s={...l,page:t};u(s),c(s),h({perPage:String(s.perPage),page:String(s.page),q:s.q})},R=a=>{const t=parseInt(a.target.value),s={...l,perPage:t,page:0};u(s),c(s),h({perPage:String(s.perPage),page:String(s.page),q:s.q})},B=a=>{const t=a.target.value,s={...l,q:t,page:0};u(s),c(s),h({perPage:String(s.perPage),page:String(s.page),q:s.q})},q=(a,t)=>{a.stopPropagation(),a.preventDefault(),r(`/admin/customers/${t}/edit`,{state:l})},E=()=>{r("/admin/customers/create")},P=a=>{r(`/admin/customers/${a}`,{state:l})},_=a=>a==="Activo"?"success":a==="Prospecto"?"info":a==="Pruebas"?"warning":a==="Suspendido"?"error":"info";return e.jsx(I,{sx:{width:"100%",position:"relative"},children:e.jsxs(V,{variant:"outlined",sx:{width:"100%",mb:2},children:[e.jsxs(K,{children:[e.jsx(v,{component:"h2",variant:"h5",noWrap:!0,color:"primary",sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:"Clientes"}),e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(ie,{children:[e.jsx(ne,{children:e.jsx(U,{})}),e.jsx(oe,{placeholder:"Buscar…",type:"search",inputProps:{"aria-label":"search"},onChange:B,defaultValue:d.get("q")})]}),e.jsx(k,{size:"small",color:"primary",startIcon:e.jsx(A,{}),onClick:()=>E(),disabled:!0,children:"Agregar"})]})]}),y&&e.jsx(X,{sx:{position:"absolute",top:"0",left:0,right:0,borderRadius:4}}),e.jsx(Y,{children:e.jsxs(Z,{size:"small",children:[e.jsx(ee,{children:e.jsxs(w,{children:[e.jsx(n,{children:"ID"}),e.jsx(n,{children:"Nombre"}),e.jsx(n,{align:"center",children:"Productos"}),e.jsx(n,{align:"center",children:"Dispositivos"}),e.jsx(n,{children:"Estatus"}),e.jsx(n,{align:"right",children:"Acciones"})]})}),e.jsx(ae,{children:(C=o==null?void 0:o.data)==null?void 0:C.map(a=>{var t,s;return e.jsxs(w,{hover:!0,onClick:()=>P(a.id),sx:{cursor:"pointer"},children:[e.jsx(n,{children:a.customId}),e.jsx(n,{children:a.name}),e.jsx(n,{children:e.jsxs(f,{direction:"row",spacing:1,justifyContent:"center",children:[e.jsx(v,{children:(t=a.products)==null?void 0:t.length}),e.jsx(m,{title:((s=a.products)==null?void 0:s.length)===0?e.jsx("em",{children:"Sin productos"}):a.products.map(i=>e.jsxs("div",{children:[i.name,e.jsx("br",{})]})),arrow:!0,children:e.jsx(G,{color:"info"})})]})}),e.jsx(n,{children:e.jsxs(f,{direction:"row",spacing:.5,justifyContent:"center",children:[e.jsx(m,{title:"Android",children:e.jsx(W,{color:a.devices.find(i=>i==="android")?"primary":"disabled"})}),e.jsx(m,{title:"iOS",children:e.jsx(N,{color:a.devices.find(i=>i==="ios")?"primary":"disabled"})}),e.jsx(m,{title:"Windows",children:e.jsx(O,{color:a.devices.find(i=>i==="windows")?"primary":"disabled"})})]})}),e.jsx(n,{children:a.status&&e.jsx(se,{label:a.status,variant:"outlined",size:"small",color:_(a.status),onClick:()=>P(a.id)})}),e.jsx(n,{children:e.jsxs(f,{direction:"row",spacing:1,justifyContent:"flex-end",children:[e.jsx(k,{size:"small",color:"info",startIcon:e.jsx(z,{}),onClick:i=>q(i,a.id),children:"Editar"}),e.jsx(H,{id:a.id,name:a.name,onFinished:()=>c(l)})]})})]},a.id)})})]})}),e.jsx(re,{rowsPerPageOptions:[5,10,25,100],component:"div",count:(o==null?void 0:o.total)||0,rowsPerPage:l.perPage,page:(o==null?void 0:o.page)||0,onPageChange:$,onRowsPerPageChange:R,labelRowsPerPage:"Filas por página:",labelDisplayedRows:({from:a,to:t,count:s})=>`${a}-${t} de ${s}`,showFirstButton:!0,showLastButton:!0,getItemAriaLabel:a=>a==="first"?"Ir a la primera página":a==="last"?"Ir a la última página":a==="next"?"Ir a la página siguiente":"Regresar a la pagina anterior"})]})})}function ce(){return e.jsx(te,{sx:{mt:4,mb:4},children:e.jsx(le,{})})}function De(){return e.jsx(Q,{title:"Clientes",children:e.jsx(ce,{})})}export{De as default};
